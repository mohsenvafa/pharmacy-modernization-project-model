# Prescription Domain GraphQL Schema

type Prescription {
  id: ID!
  patientID: ID!
  patient: Patient @auth @permissionAny(requires: ["patient:read", "admin:all"])
  drug: String!
  dose: String!
  status: PrescriptionStatus!
  createdAt: Time!
}

enum PrescriptionStatus {
  DRAFT
  ACTIVE
  PAUSED
  COMPLETED
}

input CreatePrescriptionInput {
  patientID: ID!
  drug: String!
  dose: String!
  status: PrescriptionStatus!
}

input UpdatePrescriptionInput {
  drug: String
  dose: String
  status: PrescriptionStatus
}

extend type Query {
  # Prescription queries - requires authentication and prescription:read or healthcare role or admin
  prescription(id: ID!): Prescription
    @auth
    @permissionAny(
      requires: [
        "prescription:read"
        "doctor:role"
        "pharmacist:role"
        "nurse:role"
        "admin:all"
      ]
    )

  prescriptions(status: String, limit: Int, offset: Int): [Prescription!]!
    @auth
    @permissionAny(
      requires: [
        "prescription:read"
        "doctor:role"
        "pharmacist:role"
        "nurse:role"
        "admin:all"
      ]
    )
}
