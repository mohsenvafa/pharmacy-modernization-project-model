# Prescription Domain GraphQL Schema

type Prescription {
  id: ID!
  patientID: ID!
  patient: Patient @auth @permissionAny(requires: ["patient:read", "admin:all"])
  drug: String!
  dose: String!
  status: PrescriptionStatus!
  createdAt: Time!
}

enum PrescriptionStatus {
  DRAFT
  ACTIVE
  PAUSED
  COMPLETED
}

input CreatePrescriptionInput {
  patientID: ID!
  drug: String!
  dose: String!
  status: PrescriptionStatus!
}

input UpdatePrescriptionInput {
  drug: String
  dose: String
  status: PrescriptionStatus
}

extend type Mutation {
  # Prescription mutations - requires authentication and prescription:write or healthcare role or admin
  createPrescription(input: CreatePrescriptionInput!): Prescription
    @auth
    @permissionAny(
      requires: [
        "prescription:write"
        "doctor:role"
        "pharmacist:role"
        "admin:all"
      ]
    )

  updatePrescription(id: ID!, input: UpdatePrescriptionInput!): Prescription
    @auth
    @permissionAny(
      requires: [
        "prescription:write"
        "doctor:role"
        "pharmacist:role"
        "admin:all"
      ]
    )
}
