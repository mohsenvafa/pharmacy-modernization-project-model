# Production Configuration
# This file is merged with app.yaml when PM_APP_ENV=prod
# Use environment variables for sensitive values

app:
  env: prod
  port: 8080

logging:
  level: info
  format: json

auth:
  dev_mode: false  # MUST be false in production
  jwt:
    secret: "${PM_AUTH_JWT_SECRET}"  # REQUIRED: Set via environment variable
    issuer: "${PM_AUTH_JWT_ISSUER}"
    audience: "${PM_AUTH_JWT_AUDIENCE}"
    cookie:
      name: "auth_token"
      secure: true  # HTTPS only
      httponly: true
      max_age: 3600

database:
  mongodb:
    uri: "${PM_MONGODB_URI}"
    database: "pharmacy_modernization_prod"
    collections:
      patients: "patients"
    connection:
      max_pool_size: 100
      min_pool_size: 10
      max_idle_time: "30m"
      connect_timeout: "10s"
      socket_timeout: "30s"
    options:
      retry_writes: true
      retry_reads: true

external:
  pharmacy:
    use_mock: false
    timeout: "10s"
    endpoints:
      get_prescription: "${PM_PHARMACY_BASE_URL}/pharmacy/v1/prescriptions/{prescriptionID}"
  billing:
    use_mock: false
    timeout: "10s"
    endpoints:
      get_invoice: "${PM_BILLING_BASE_URL}/billing/v1/invoices/{prescriptionID}"
      get_invoices_by_patient: "${PM_BILLING_BASE_URL}/billing/v1/patients/{patientID}/invoices"
      create_invoice: "${PM_BILLING_BASE_URL}/billing/v1/invoices"
      acknowledge_invoice: "${PM_BILLING_BASE_URL}/billing/v1/invoices/{invoiceID}/acknowledge"
      get_invoice_payment: "${PM_BILLING_BASE_URL}/billing/v1/invoices/{invoiceID}/payment"

